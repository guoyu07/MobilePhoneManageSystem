webpackJsonp([0],{240:function(e,t,a){function r(e){a(339)}var n=a(51)(a(291),a(374),r,"data-v-1b3ef96a",null);e.exports=n.exports},249:function(e,t,a){e.exports={default:a(250),__esModule:!0}},250:function(e,t,a){var r=a(6),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},252:function(e,t,a){"use strict";function r(e,t,a){this.$children.forEach(function(n){n.$options.componentName===e?n.$emit.apply(n,[t].concat(a)):r.apply(n,[e,t].concat([a]))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{dispatch:function(e,t,a){for(var r=this.$parent||this.$root,n=r.$options.componentName;r&&(!n||n!==e);)(r=r.$parent)&&(n=r.$options.componentName);r&&r.$emit.apply(r,[t].concat(a))},broadcast:function(e,t,a){r.call(this,e,t,a)}}}},253:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){}function o(e,t){var a=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var r=t.split("."),n=0,o=r.length;n<o-1;++n){var i=r[n];if(!(i in a))throw new Error("please transfer a valid prop path to form item!");a=a[i]}return{o:a,k:r[n],v:a[r[n]]}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(88),l=r(i),s=a(252),u=r(s);t.default={name:"ElFormItem",componentName:"ElFormItem",mixins:[u.default],props:{label:String,labelWidth:String,prop:String,required:Boolean,rules:[Object,Array],error:String,validateStatus:String,showMessage:{type:Boolean,default:!0}},watch:{error:function(e){this.validateMessage=e,this.validateState=e?"error":""},validateStatus:function(e){this.validateState=e}},computed:{labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var a=this.labelWidth||this.form.labelWidth;return a&&(e.marginLeft=a),e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),o(e,t).v}}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every(function(e){return!e.required||(t=!0,!1)}),t}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=this.getFilteredRule(e);if(!r||0===r.length)return a(),!0;this.validateState="validating";var o={};o[this.prop]=r;var i=new l.default(o),s={};s[this.prop]=this.fieldValue,i.validate(s,{firstFields:!0},function(e,r){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",a(t.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,a=this.prop;-1!==a.indexOf(":")&&(a=a.replace(/:/,"."));var r=o(e,a);Array.isArray(t)?(this.validateDisabled=!0,r.o[r.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,r.o[r.k]=this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules;return e=e?e[this.prop]:[],[].concat(t||e||[])},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e});this.getRules().length&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}}},254:function(e,t,a){var r=a(51)(a(253),a(255),null,null,null);e.exports=r.exports},255:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-form-item",class:{"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-required":e.isRequired||e.required}},[e.label||e.$slots.label?a("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.prop}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e(),e._v(" "),a("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.validateMessage))]):e._e()])],2)])},staticRenderFns:[]}},256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElButton",props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean},methods:{handleClick:function(e){this.$emit("click",e)},handleInnerClick:function(e){this.disabled&&e.stopPropagation()}}}},257:function(e,t,a){e.exports={default:a(258),__esModule:!0}},258:function(e,t,a){a(53),a(52),e.exports=a(259)},259:function(e,t,a){var r=a(10),n=a(89);e.exports=a(6).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},260:function(e,t,a){var r=a(51)(a(256),a(261),null,null,null);e.exports=r.exports},261:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.size?"el-button--"+e.size:"",{"is-disabled":e.disabled,"is-loading":e.loading,"is-plain":e.plain}],attrs:{disabled:e.disabled,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?a("i",{staticClass:"el-icon-loading",on:{click:e.handleInnerClick}}):e._e(),e._v(" "),e.icon&&!e.loading?a("i",{class:"el-icon-"+e.icon,on:{click:e.handleInnerClick}}):e._e(),e._v(" "),e.$slots.default?a("span",{on:{click:e.handleInnerClick}},[e._t("default")],2):e._e()])},staticRenderFns:[]}},266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElBadge",props:{value:{},max:Number,isDot:Boolean,hidden:Boolean},computed:{content:function(){if(!this.isDot){var e=this.value,t=this.max;return"number"==typeof e&&"number"==typeof t&&t<e?t+"+":e}}}}},291:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(257),o=r(n),i=a(249),l=r(i),s=a(23),u=r(s),d=a(87),c=(a(22),a(254)),f=r(c),m=a(366),p=r(m),h=a(260),b=r(h);t.default={components:{ElButton:b.default,ElBadge:p.default,ElFormItem:f.default},data:function(){var e=this,t=function(t,a,r){a?/^[0-9A-Z-]{1,15}$/.test(a)?e.isAdded(a)?r(new Error("请勿重复添加")):r():r(new Error("编号必须由1-15位数字、大写字母、减号组成")):r(new Error("请输入串号"))};return{form:{supplierType:{},supplier:{},brand:{},mobileModel:{},config:{},color:{},buyPrice:0,amount:0,remark:"",mobiles:[],addForm:{id:""}},supplierTypes:[],suppliers:[],brands:[],mobileModels:[],configs:[],colors:[],addRule:{buyPrice:[{validator:function(e,t,a){t||a(new Error("请输入进价")),/^\d+(\.\d+)?$/.test(t)?a():a(new Error("请输入非负实数"))},trigger:"blur"}]},idRule:{id:[{validator:t,trigger:"blur"}]}}},computed:{amount:function(){return this.quantity*this.form.buyPrice},quantity:function(){return this.form.mobiles.length},referencePrice:function(){var e=this.form.mobileModel;return e?e.buyingPrice:0}},methods:{test:function(){console.log(this.form)},onSubmit:function(){var e=this,t=d.backEndUrl+"/mobile_inbound/add_mobile_inbound.do";u.default.post(t,(0,l.default)({supplier:e.form.supplier,mobileModel:e.form.mobileModel,color:e.form.color,config:e.form.config,buyPrice:e.form.buyPrice,quantity:e.quantity,amount:e.amount,inputTime:+new Date,inputUser:null,checkTime:null,checkUser:null,checkStatus:null,dept:null,remark:e.form.remark,mobiles:e.form.mobiles}),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===d.SUCCESS?(e.$message.success("入库成功"),e.resetForm()):e.$message.error(t.data.msg)})},resetForm:function(){this.$refs.form.resetFields(),this.$refs.addForm.resetFields(),this.form.mobiles=[],this.form.supplierType={},this.form.supplier={},this.form.brand={},this.form.mobileModel={},this.form.config={},this.form.color={},this.form.remark=""},getSupplierTypes:function(){var e=this,t=d.backEndUrl+"/supplier_type/get_supplier_types.do";u.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===d.SUCCESS?e.supplierTypes=t.data.data:e.$message.error(t.data.msg)})},getSuppliers:function(e){var t=this,a=d.backEndUrl+"/supplier/get_suppliers.do";u.default.post(a,(0,l.default)({name:"",type:e?e.name:""}),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){e.data.status===d.SUCCESS?t.suppliers=e.data.data:t.$message.error(e.data.msg)})},getBrands:function(){var e=this,t=d.backEndUrl+"/brand/get_brands.do";u.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===d.SUCCESS?e.brands=t.data.data:e.$message.error(t.data.msg)})},getMobileModels:function(e){var t=this,a=d.backEndUrl+"/mobile_model/get_mobile_models.do";u.default.post(a,(0,l.default)({name:"",brand:e?e.name:""}),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){e.data.status===d.SUCCESS?t.mobileModels=e.data.data:t.$message.error(e.data.msg)})},getConfigs:function(){var e=this,t=d.backEndUrl+"/config/get_configs.do";u.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===d.SUCCESS?e.configs=t.data.data:e.$message.error(t.data.msg)})},getColors:function(){var e=this,t=d.backEndUrl+"/color/get_colors.do";u.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===d.SUCCESS?e.colors=t.data.data:e.$message.error(t.data.msg)})},getOptions:function(){this.getSupplierTypes(),this.getBrands(),this.getConfigs(),this.getColors()},turnToInboundList:function(){this.$router.push("/inbound_list")},addId:function(){if(!this.form.addForm.id)return!1;var e=this.form.addForm.id;if(this.isAdded(e))return this.$message.error("该串号已经添加！"),!1;this.form.mobiles.push({id:e}),this.form.addForm.id=null},removeId:function(e){this.form.mobiles=this.form.mobiles.filter(function(t){return t.id!==e.id})},isAdded:function(e){var t=!0,a=!1,r=void 0;try{for(var n,i=(0,o.default)(this.form.mobiles);!(t=(n=i.next()).done);t=!0){if(n.value.id===e)return!0}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}return!1}},mounted:function(){this.getOptions()}}},306:function(e,t,a){t=e.exports=a(214)(!0),t.push([e.i,".mobile-inbound[data-v-1b3ef96a]{width:100%;height:100%;margin:0;padding:0;top:0;z-index:1;background-color:#f0f8ff}.form[data-v-1b3ef96a]{margin:100px;width:50%}.inline-table .el-table[data-v-1b3ef96a]{margin-top:20px}h1[data-v-1b3ef96a],h2[data-v-1b3ef96a],h3[data-v-1b3ef96a]{font-weight:400;margin:40px 0}","",{version:3,sources:["D:/Documents/webstormworkspace/ManageSystem/src/components/supplier_business/MobileInbound.vue"],names:[],mappings:"AACA,iCACE,WAAY,AACZ,YAAa,AACb,SAAU,AACV,UAAW,AACX,MAAO,AACP,UAAW,AACX,wBAA4B,CAC7B,AACD,uBACE,aAAc,AACd,SAAW,CACZ,AACD,yCACE,eAAiB,CAClB,AACD,4DACE,gBAAoB,AACpB,aAAe,CAChB",file:"MobileInbound.vue",sourcesContent:["\n.mobile-inbound[data-v-1b3ef96a] {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  top: 0;\n  z-index: 1;\n  background-color: aliceblue;\n}\n.form[data-v-1b3ef96a] {\n  margin: 100px;\n  width: 50%;\n}\n.inline-table .el-table[data-v-1b3ef96a] {\n  margin-top: 20px;\n}\nh1[data-v-1b3ef96a], h2[data-v-1b3ef96a], h3[data-v-1b3ef96a] {\n  font-weight: normal;\n  margin: 40px 0;\n}\n"],sourceRoot:""}])},339:function(e,t,a){var r=a(306);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(215)("45eea68f",r,!0)},366:function(e,t,a){var r=a(51)(a(266),a(372),null,null,null);e.exports=r.exports},372:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-badge"},[e._t("default"),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-center"}},[a("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||e.isDot),expression:"!hidden && ( content || isDot )"}],staticClass:"el-badge__content",class:{"is-fixed":e.$slots.default,"is-dot":e.isDot},domProps:{textContent:e._s(e.content)}})])],2)},staticRenderFns:[]}},374:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mobile-inbound"},[a("h3",[e._v("手机入库")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.addRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商类别"}},[a("el-select",{attrs:{placeholder:"选择供应商类别",valueKey:"id"},on:{change:e.getSuppliers},model:{value:e.form.supplierType,callback:function(t){e.form.supplierType=t},expression:"form.supplierType"}},e._l(e.supplierTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{ref:"selectSupplier",attrs:{placeholder:"请先选择供应商类别",clearable:"",valueKey:"id"},model:{value:e.form.supplier,callback:function(t){e.form.supplier=t},expression:"form.supplier"}},e._l(e.suppliers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{placeholder:"选择品牌",valueKey:"name"},on:{change:e.getMobileModels},model:{value:e.form.brand,callback:function(t){e.form.brand=t},expression:"form.brand"}},e._l(e.brands,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"机型"}},[a("el-select",{attrs:{placeholder:"请先选择品牌",clearable:"",valueKey:"id"},model:{value:e.form.mobileModel,callback:function(t){e.form.mobileModel=t},expression:"form.mobileModel"}},e._l(e.mobileModels,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"配置"}},[a("el-select",{attrs:{placeholder:"选择配置",valueKey:"name"},model:{value:e.form.config,callback:function(t){e.form.config=t},expression:"form.config"}},e._l(e.configs,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"颜色"}},[a("el-select",{attrs:{placeholder:"选择颜色",valueKey:"name"},model:{value:e.form.color,callback:function(t){e.form.color=t},expression:"form.color"}},e._l(e.colors,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"参考价"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.referencePrice,callback:function(t){e.referencePrice=t},expression:"referencePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"进货价",prop:"buyPrice"}},[a("el-input",{model:{value:e.form.buyPrice,callback:function(t){e.form.buyPrice=t},expression:"form.buyPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总价"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.form.remark=t},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加"}},[a("div",{staticClass:"inline-table"},[a("el-form",{ref:"addForm",attrs:{inline:!0,rules:e.idRule,model:e.form.addForm}},[a("el-form-item",{attrs:{prop:"id"}},[a("el-input",{attrs:{placeholder:"串号"},model:{value:e.form.addForm.id,callback:function(t){e.form.addForm.id=t},expression:"form.addForm.id"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.addId}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.form.mobiles}},[a("el-table-column",{attrs:{prop:"id",label:"串号"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:!0,type:"danger",icon:"delete",size:"small"},on:{click:function(a){e.removeId(t.row)}}})]}}])})],1)],1)]),e._v(" "),a("el-form-item",[a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.turnToInboundList}},[e._v("查看入库单")])],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=0.047ac848025d93f46691.js.map