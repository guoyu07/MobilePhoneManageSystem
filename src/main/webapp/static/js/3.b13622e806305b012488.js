webpackJsonp([3],{230:function(e,t,r){function a(e){r(354)}var i=r(51)(r(280),r(388),a,"data-v-a1ce4230",null);e.exports=i.exports},248:function(e,t,r){e.exports={default:r(249),__esModule:!0}},249:function(e,t,r){var a=r(6),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},251:function(e,t,r){"use strict";function a(e,t,r){this.$children.forEach(function(i){i.$options.componentName===e?i.$emit.apply(i,[t].concat(r)):a.apply(i,[e,t].concat([r]))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{dispatch:function(e,t,r){for(var a=this.$parent||this.$root,i=a.$options.componentName;a&&(!i||i!==e);)(a=a.$parent)&&(i=a.$options.componentName);a&&a.$emit.apply(a,[t].concat(r))},broadcast:function(e,t,r){a.call(this,e,t,r)}}}},252:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(){}function n(e,t){var r=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var a=t.split("."),i=0,n=a.length;i<n-1;++i){var o=a[i];if(!(o in r))throw new Error("please transfer a valid prop path to form item!");r=r[o]}return{o:r,k:a[i],v:r[a[i]]}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(88),l=a(o),s=r(251),d=a(s);t.default={name:"ElFormItem",componentName:"ElFormItem",mixins:[d.default],props:{label:String,labelWidth:String,prop:String,required:Boolean,rules:[Object,Array],error:String,validateStatus:String,showMessage:{type:Boolean,default:!0}},watch:{error:function(e){this.validateMessage=e,this.validateState=e?"error":""},validateStatus:function(e){this.validateState=e}},computed:{labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var r=this.labelWidth||this.form.labelWidth;return r&&(e.marginLeft=r),e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),n(e,t).v}}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every(function(e){return!e.required||(t=!0,!1)}),t}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=this.getFilteredRule(e);if(!a||0===a.length)return r(),!0;this.validateState="validating";var n={};n[this.prop]=a;var o=new l.default(n),s={};s[this.prop]=this.fieldValue,o.validate(s,{firstFields:!0},function(e,a){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",r(t.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,r=this.prop;-1!==r.indexOf(":")&&(r=r.replace(/:/,"."));var a=n(e,r);Array.isArray(t)?(this.validateDisabled=!0,a.o[a.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,a.o[a.k]=this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules;return e=e?e[this.prop]:[],[].concat(t||e||[])},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e});this.getRules().length&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}}},253:function(e,t,r){var a=r(51)(r(252),r(254),null,null,null);e.exports=a.exports},254:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"el-form-item",class:{"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-required":e.isRequired||e.required}},[e.label||e.$slots.label?r("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.prop}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e(),e._v(" "),r("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),e._v(" "),r("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?r("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.validateMessage))]):e._e()])],2)])},staticRenderFns:[]}},255:function(e,t,r){e.exports={default:r(256),__esModule:!0}},256:function(e,t,r){r(53),r(52),e.exports=r(257)},257:function(e,t,r){var a=r(10),i=r(89);e.exports=r(6).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},280:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(255),n=a(i),o=r(248),l=a(o),s=r(23),d=a(s),c=r(87),u=r(253),f=a(u);t.default={components:{ElFormItem:f.default},data:function(){var e=function(e,t,r){if(t)if(/^[0-9A-Z-]{1,15}$/.test(t)){var a=c.backEndUrl+"/mobile_model/check_mobile_model.do";d.default.get(a,{params:{id:t}}).then(function(e){e.data.status!==c.SUCCESS?r(new Error(e.data.msg)):r()})}else r(new Error("编号必须由1-15位数字、大写字母、减号组成"));else r(new Error("请输入编号"))},t=function(e,t,r){t?r():r(new Error("请输入名称"))},r=function(e,t,r){t?/^\d+(\.\d+)?$/.test(t)?r():r(new Error("请输入非负实数")):r()};return{form:{id:"",name:"",brand:"",buyingPrice:"",remark:"",rebatePrices:[],rebatePriceForm:{rebateType:{},price:0}},mobileModel:{},brands:[],rebateTypes:[],addRule:{id:[{validator:e,trigger:"blur"}],name:[{validator:t,trigger:"blur"}],buyingPrice:[{validator:r,trigger:"blur"}],price:[{validator:r,trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this,t=!0,r=!1,a=void 0;try{for(var i,o=(0,n.default)(this.form.rebatePrices);!(t=(i=o.next()).done);t=!0){i.value.mobileModel={id:this.$route.params.id}}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}var s=c.backEndUrl+"/mobile_model/update_mobile_model.do";d.default.post(s,(0,l.default)({id:e.$route.params.id,name:e.form.name,brand:e.form.brand,buyingPrice:e.form.buyingPrice,rebatePrices:e.form.rebatePrices,remark:e.form.remark}),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===c.SUCCESS?(e.$router.back(),e.$message.success("修改成功")):e.$message.error(t.data.msg)})},onCancel:function(){this.$router.back()},getBrands:function(){var e=this,t=c.backEndUrl+"/brand/get_brands.do";d.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===c.SUCCESS&&(e.brands=t.data.data)})},getRebateTypes:function(){var e=this,t=c.backEndUrl+"/rebate_type/get_rebate_types.do";d.default.post(t,{},{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){t.data.status===c.SUCCESS&&(e.rebateTypes=t.data.data)})},addRebatePrice:function(){if(!this.form.rebatePriceForm)return!1;var e=JSON.parse((0,l.default)(this.form.rebatePriceForm));if(e.rebateType=JSON.parse(e.rebateType),this.isAdded(e.rebateType))return!1;this.form.rebatePrices.push(e)},removeRebatePrice:function(e){this.form.rebatePrices=this.form.rebatePrices.filter(function(t){return t.rebateType.id!==e.rebateType.id})},selectShowed:function(e){!e||0!==this.brands.length&&0!==this.rebateTypes.length||(this.getBrands(),this.getRebateTypes())},isAdded:function(e){var t=!0,r=!1,a=void 0;try{for(var i,o=(0,n.default)(this.form.rebatePrices);!(t=(i=o.next()).done);t=!0){if(i.value.rebateType.id===e.id)return!0}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}return!1}},mounted:function(){var e=this,t=c.backEndUrl+"/mobile_model/get_mobile_model.do";d.default.get(t,{params:{id:e.$route.params.id}}).then(function(t){if(t.data.status===c.SUCCESS){var r=t.data.data;e.mobileModel=r,e.form.id=r.id,e.form.name=r.name,e.form.brand=r.brand.name,e.form.buyingPrice=r.buyingPrice,e.form.rebatePrices=r.rebatePrices,e.form.remark=r.remark}}),this.getRebateTypes(),this.getBrands()}}},322:function(e,t,r){t=e.exports=r(214)(!0),t.push([e.i,".mobile-model-detail[data-v-a1ce4230]{width:100%;height:100%;margin:0;padding:0;top:0;z-index:2;background-color:#f0f8ff;position:absolute}.form[data-v-a1ce4230]{margin:100px;width:50%}h1[data-v-a1ce4230],h2[data-v-a1ce4230],h3[data-v-a1ce4230]{font-weight:400;margin:40px}","",{version:3,sources:["D:/Documents/webstormworkspace/ManageSystem/src/components/base_config/MobileModelDetail.vue"],names:[],mappings:"AACA,sCACE,WAAY,AACZ,YAAa,AACb,SAAU,AACV,UAAW,AACX,MAAO,AACP,UAAW,AACX,yBAA4B,AAC5B,iBAAmB,CACpB,AACD,uBACE,aAAc,AACd,SAAW,CACZ,AACD,4DACE,gBAAoB,AACpB,WAAa,CACd",file:"MobileModelDetail.vue",sourcesContent:["\n.mobile-model-detail[data-v-a1ce4230] {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  top: 0;\n  z-index: 2;\n  background-color: aliceblue;\n  position: absolute;\n}\n.form[data-v-a1ce4230] {\n  margin: 100px;\n  width: 50%;\n}\nh1[data-v-a1ce4230], h2[data-v-a1ce4230], h3[data-v-a1ce4230] {\n  font-weight: normal;\n  margin: 40px;\n}\n"],sourceRoot:""}])},354:function(e,t,r){var a=r(322);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(215)("dd1deefc",a,!0)},388:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mobile-model-detail"},[r("el-form",{staticClass:"form",attrs:{model:e.form,rules:e.addRule,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"手机型号编号",prop:"id"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.form.id,callback:function(t){e.form.id=t},expression:"form.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"型号名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌"}},[r("el-select",{attrs:{placeholder:"请选择品牌"},on:{"visible-change":e.selectShowed},model:{value:e.form.brand,callback:function(t){e.form.brand=t},expression:"form.brand"}},e._l(e.brands,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"进货价",prop:"buyingPrice"}},[r("el-input",{model:{value:e.form.buyingPrice,callback:function(t){e.form.buyingPrice=t},expression:"form.buyingPrice"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.form.remark=t},expression:"form.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"返利价格设置"}},[r("div",{staticClass:"inline-table"},[r("el-form",{attrs:{inline:!0,rules:e.addRule,model:e.form.rebatePriceForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"返利类型"},on:{"visible-change":e.selectShowed},model:{value:e.form.rebatePriceForm.rebateType,callback:function(t){e.form.rebatePriceForm.rebateType=t},expression:"form.rebatePriceForm.rebateType"}},e._l(e.rebateTypes,function(t,a){return r("el-option",{key:a,attrs:{"value-key":t.id,label:t.name,disabled:e.isAdded(t),value:JSON.stringify(t)}})}))],1),e._v(" "),r("el-form-item",{attrs:{prop:"price"}},[r("el-input",{attrs:{placeholder:"返利价格"},model:{value:e.form.rebatePriceForm.price,callback:function(t){e.form.rebatePriceForm.price=t},expression:"form.rebatePriceForm.price"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:e.addRebatePrice}},[e._v("添加")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.form.rebatePrices}},[r("el-table-column",{attrs:{prop:"rebateType.name",label:"返利类型"}}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"返利价格"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{plain:!0,type:"danger",icon:"delete",size:"small"},on:{click:function(r){e.removeRebatePrice(t.row)}}})]}}])})],1)],1)]),e._v(" "),r("el-form-item",{staticClass:"buttons"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=3.b13622e806305b012488.js.map